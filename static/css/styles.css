/* ========================================
   CSS Variables - Design System
   ======================================== */
:root {
  /* Colors - Dark theme */
  --bg: #0d1117;
  --panel: #161b22;
  --panel2: #21262d;
  --text: #e6edf3;
  --muted: #8b949e;
  --accent: #58a6ff;
  --ok: #3fb950;
  --warn: #d29922;
  --bad: #f85149;
  --line: #30363d;
  
  /* Spacing - unified scale */
  --space-1: 2px;
  --space-2: 4px;
  --space-3: 6px;
  --space-4: 8px;
  --space-5: 10px;
  --space-6: 12px;
  --space-7: 14px;
  --space-8: 16px;
  --space-10: 20px;
  --space-12: 24px;
  --space-16: 32px;
  --space-20: 40px;
  
  /* Font sizes - unified scale */
  --font-xs: 9px;
  --font-sm: 10px;
  --font-base: 11px;
  --font-md: 12px;
  --font-normal: 13px;
  --font-lg: 14px;
  --font-xl: 16px;
  --font-metric: 17px;
  --font-2xl: 18px;
  --font-3xl: 22px;
  
  /* Icon & UI element sizes */
  --icon-xs: 5px;
  --icon-sm: 8px;
  --icon-base: 10px;
  --icon-md: 18px;
  --icon-lg: 20px;
  
  /* Layout sizes */
  --header-height: 48px;
  --sidebar-width: 520px;
  --panel-height: 780px;
  
  /* Radius scale */
  --radius-sm: 6px;
  --radius: 8px;
  --radius-md: 10px;
  --radius-lg: 12px;
  --radius-xl: 20px;
  --radius-full: 50%;
  --radius-pill: 999px;
  
  /* Shadow scale */
  --shadow-sm: 0 1px 2px rgba(0,0,0,0.1);
  --shadow: 0 2px 8px rgba(0,0,0,0.1);
  --shadow-md: 0 4px 12px rgba(0,0,0,0.15);
  --shadow-lg: 0 8px 24px rgba(0,0,0,0.4);
  
  /* Transition */
  --transition-fast: all 0.15s ease;
  --transition: all 0.2s ease;
  --transition-slow: all 0.3s ease;
  
  /* Z-index scale */
  --z-base: 1;
  --z-sticky: 10;
  --z-header: 100;
  --z-modal: 200;
  --z-toast: 300;
  --z-tooltip: 1000;
  
  /* Chart colors */
  --bar-normal: rgba(88, 166, 255, 0.6);
  --bar-anomaly: rgba(248, 81, 73, 0.6);
  --bar-border: rgba(88, 166, 255, 0.9);
  
  /* Chart heights */
  --chart-xs: 120px;
  --chart-sm: 140px;
  --chart-md: 170px;
  --chart-lg: 200px;
  --chart-xl: 300px;
  --chart-2xl: 400px;
  
  /* Common values */
  --text-inverse: #ffffff;
  --border-width: 1px;
  
  /* Font weights */
  --weight-medium: 500;
  --weight-semibold: 600;
  --weight-bold: 700;
  
  /* Opacity levels */
  --opacity-light: 0.1;
  --opacity-medium: 0.15;
  --opacity-strong: 0.6;
  
  /* Overlay & tints */
  --overlay-bg: rgba(0,0,0,0.6);
  --tint-light: 10%;
  --tint-medium: 15%;
  
  /* Container & component max-widths */
  --container-max: 1920px;
  --modal-max: 500px;
  --toast-max: 400px;
  --tooltip-max: 300px;
}

[data-theme="light"] {
  --bg: #f6f8fa;
  --panel: #ffffff;
  --panel2: #f6f8fa;
  --text: #24292f;
  --muted: #57606a;
  --accent: #0969da;
  --ok: #1a7f37;
  --warn: #9a6700;
  --bad: #cf222e;
  --line: #d0d7de;
  --shadow-sm: 0 1px 2px rgba(0,0,0,0.05);
  --shadow: 0 2px 8px rgba(0,0,0,0.05);
  --shadow-md: 0 4px 12px rgba(0,0,0,0.08);
  --shadow-lg: 0 8px 24px rgba(0,0,0,0.1);
  --bar-normal: rgba(9, 105, 218, 0.4);
  --bar-anomaly: rgba(207, 34, 46, 0.4);
  --bar-border: rgba(9, 105, 218, 0.8);
}

/* ========================================
   Base
   ======================================== */
* { 
  box-sizing: border-box; 
}

body { 
  margin: 0; 
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
  background: var(--bg); 
  color: var(--text);
  font-size: var(--font-lg);
  line-height: 1.5;
  overflow: hidden;
  height: 100vh;
}

/* Unified scrollbar */
:is(.container, .table-container, .users-grid, .panel-content)::-webkit-scrollbar {
  width: var(--space-3);
  height: var(--space-3);
}

:is(.container, .table-container, .users-grid, .panel-content)::-webkit-scrollbar-track {
  background: var(--panel2);
  border-radius: var(--radius-sm);
}

:is(.container, .table-container, .users-grid, .panel-content)::-webkit-scrollbar-thumb {
  background: var(--line);
  border-radius: var(--radius-sm);
}

:is(.container, .table-container, .users-grid, .panel-content)::-webkit-scrollbar-thumb:hover {
  background: var(--muted);
}

/* ========================================
   Layout
   ======================================== */
.container {
  max-width: var(--container-max);
  margin: 0 auto;
  padding: var(--space-7) var(--space-8);
  height: calc(100vh - var(--header-height));
  overflow-y: auto;
  overflow-x: hidden;
}

/* ========================================
   Header
   ======================================== */
.header {
  position: sticky;
  top: 0;
  z-index: var(--z-header);
  background: var(--panel);
  border-bottom: var(--border-width) solid var(--line);
  padding: var(--space-4) var(--space-8);
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-5);
  flex-wrap: nowrap;
  height: var(--header-height);
  overflow-x: auto;
  overflow-y: hidden;
}

.header-left,
.header-nav,
.header-right {
  display: flex;
  align-items: center;
}

.header-left {
  gap: var(--space-5);
  flex-shrink: 0;
}

.header-nav {
  padding: 0 var(--space-5);
  border-left: var(--border-width) solid var(--line);
  border-right: var(--border-width) solid var(--line);
  margin: 0 var(--space-4);
  flex-shrink: 0;
}

.header-right {
  gap: var(--space-4);
  flex-shrink: 1;
  min-width: 0;
  overflow-x: auto;
  overflow-y: hidden;
}

.logo {
  font-weight: var(--weight-bold);
  font-size: var(--font-xl);
  display: flex;
  align-items: center;
  gap: var(--space-3);
}

.logo svg { 
  width: var(--icon-lg); 
  height: var(--icon-lg); 
}

/* ========================================
   Badges
   ======================================== */
.status-badges,
.status-badges-compact {
  display: flex;
  align-items: center;
  flex-shrink: 0;
}

.status-badges { gap: var(--space-4); }
.status-badges-compact { gap: var(--space-2); }

/* Base badge */
.badge,
.badge-compact {
  display: inline-flex;
  align-items: center;
  background: var(--panel2);
  border: var(--border-width) solid var(--line);
  color: var(--muted);
}

.badge {
  gap: var(--space-3);
  padding: var(--space-2) var(--space-5);
  border-radius: var(--radius-xl);
  font-size: var(--font-md);
}

.badge-compact {
  gap: var(--space-1);
  padding: var(--space-1) var(--space-3);
  border-radius: var(--radius-md);
  font-size: var(--font-base);
  line-height: 1.2;
  white-space: nowrap;
}

/* Status dots - unified */
.dot {
  border-radius: var(--radius-full);
  background: var(--muted);
  flex-shrink: 0;
}

.badge .dot { 
  width: var(--icon-sm); 
  height: var(--icon-sm); 
}

.badge-compact .dot { 
  width: var(--icon-xs); 
  height: var(--icon-xs); 
}

.status-dot { 
  width: var(--icon-base); 
  height: var(--icon-base); 
  cursor: help; 
}

.dot.ok, .status-dot.ok { background: var(--ok); }
.dot.bad, .status-dot.bad { background: var(--bad); }
.dot.warn, .status-dot.warn { background: var(--warn); }

.badge-clickable {
  cursor: pointer;
  transition: var(--transition);
}

.badge-clickable:hover {
  background: var(--panel);
  border-color: var(--accent);
  transform: translateY(-1px);
}

/* ========================================
   Buttons & Controls
   ======================================== */
.btn {
  display: inline-flex;
  align-items: center;
  gap: var(--space-3);
  padding: var(--space-4) var(--space-8);
  background: var(--panel2);
  border: var(--border-width) solid var(--line);
  border-radius: var(--radius);
  cursor: pointer;
  font-size: var(--font-lg);
  color: var(--text);
  transition: var(--transition-fast);
}

.btn:hover { border-color: var(--accent); }
.btn.primary { background: var(--accent); border-color: var(--accent); color: var(--text-inverse); }
.btn.danger { background: var(--bad); border-color: var(--bad); color: var(--text-inverse); }
.btn.ok { background: var(--ok); border-color: var(--ok); color: var(--text-inverse); }
.btn.primary:hover,
.btn.danger:hover { opacity: .9; }

.btn-group { 
  display: flex; 
  gap: var(--space-6); 
  flex-wrap: wrap; 
  margin-bottom: var(--space-10); 
}

.theme-toggle,
.lang-toggle {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  padding: var(--space-3) var(--space-6);
  background: var(--panel2);
  border: var(--border-width) solid var(--line);
  border-radius: var(--radius-xl);
  cursor: pointer;
  font-size: var(--font-normal);
  color: var(--text);
  transition: var(--transition-fast);
}

.theme-toggle:hover,
.lang-toggle:hover { 
  border-color: var(--accent); 
}

/* ========================================
   Navigation
   ======================================== */
.tabs {
  display: flex;
  gap: var(--space-3);
  flex-wrap: nowrap;
}

.tab {
  padding: var(--space-3) var(--space-6);
  background: transparent;
  border: var(--border-width) solid transparent;
  border-radius: var(--radius-sm);
  cursor: pointer;
  font-size: var(--font-normal);
  font-weight: var(--weight-medium);
  color: var(--muted);
  transition: var(--transition-fast);
  white-space: nowrap;
  flex-shrink: 0;
}

.tab:hover { 
  background: var(--panel2);
  color: var(--text); 
}

.tab.active { 
  background: var(--accent); 
  border-color: var(--accent); 
  color: var(--text-inverse); 
  font-weight: var(--weight-semibold);
}

/* Nav pills */
.nav-pills {
  display: flex;
  gap: var(--space-3);
  align-items: center;
  flex-wrap: nowrap;
  flex-shrink: 0;
}

.nav-pill {
  padding: var(--space-3) var(--space-5);
  background: var(--panel2);
  border: var(--border-width) solid var(--line);
  border-radius: var(--radius-sm);
  cursor: pointer;
  font-size: var(--font-base);
  font-weight: var(--weight-medium);
  color: var(--muted);
  transition: var(--transition-fast);
  white-space: nowrap;
}

.nav-pill:hover {
  border-color: var(--accent);
  color: var(--text);
  background: var(--panel);
}

.nav-pill.active {
  background: var(--accent);
  border-color: var(--accent);
  color: var(--text-inverse);
  font-weight: var(--weight-semibold);
}

.nav-pill-warn { border-color: var(--bad); }
.nav-pill-warn:hover {
  border-color: var(--bad);
  background: color-mix(in srgb, var(--bad) var(--tint-light), transparent);
  color: var(--bad);
}
.nav-pill-warn.active {
  background: var(--bad);
  border-color: var(--bad);
  color: var(--text-inverse);
}

/* Segmented controls */
.seg,
.system-seg {
  display: inline-flex;
  border: var(--border-width) solid var(--line);
  background: var(--panel2);
  border-radius: var(--radius-sm);
  overflow: hidden;
  flex-shrink: 0;
}

.seg button,
.system-tab {
  border: 0;
  background: transparent;
  color: var(--muted);
  cursor: pointer;
  font-weight: var(--weight-medium);
  transition: var(--transition-fast);
  white-space: nowrap;
}

.seg button { 
  padding: var(--space-2) var(--space-5); 
  font-size: var(--font-md); 
}

.system-tab { 
  padding: var(--space-4) var(--space-8); 
  font-size: var(--font-lg); 
  border-radius: var(--radius); 
  margin-right: var(--space-2); 
}

.seg button.active,
.system-tab.active {
  color: var(--text-inverse);
  background: var(--accent);
  font-weight: var(--weight-semibold);
}

.seg button:hover:not(.active),
.system-tab:hover:not(.active) {
  background: var(--panel);
  color: var(--text);
}

.system-nav {
  margin-bottom: var(--space-10);
  padding: 0 var(--space-10);
}

/* ========================================
   Cards
   ======================================== */
/* Define card padding scale */
:root {
  --card-padding-sm: var(--space-6) var(--space-7);
  --card-padding-base: var(--space-7) var(--space-8);
  --card-padding-md: var(--space-8) var(--space-10);
  --card-padding-lg: var(--space-10) var(--space-12);
}

.card {
  background: var(--panel);
  border: var(--border-width) solid var(--line);
  border-radius: var(--radius-lg);
  padding: 0;
  margin-bottom: var(--space-10);
  box-shadow: var(--shadow);
  overflow: hidden;
}

.card-title {
  font-size: var(--font-2xl);
  font-weight: var(--weight-semibold);
  margin: 0 0 var(--space-8);
  display: flex;
  align-items: center;
  gap: var(--space-4);
}

.card-desc {
  font-size: var(--font-lg);
  color: var(--muted);
  margin: calc(-1 * var(--space-8)) 0 var(--space-10);
  padding: var(--space-7) var(--space-8);
  background: var(--panel2);
  border-radius: var(--radius);
  border-left: calc(var(--border-width) * 3) solid var(--accent);
  line-height: 1.6;
}

/* Base card header */
.card-hd {
  padding: var(--card-padding-md);
  border-bottom: var(--border-width) solid var(--line);
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: var(--space-8);
  background: var(--panel2);
}

/* Card header variants */
.card-hd-compact {
  padding: var(--card-padding-base);
}

.card-hd-dense {
  padding: var(--card-padding-sm);
}

.card-hd h2 {
  font-size: var(--font-xl);
  font-weight: var(--weight-semibold);
  margin: 0 0 var(--space-3);
  line-height: 1.4;
  color: var(--text);
}

.card-hd .meta {
  font-size: var(--font-base);
  color: var(--muted);
  line-height: 1.4;
  margin: 0;
}

.card-bd {
  padding: var(--card-padding-md);
}

/* Card modifiers for common patterns */
.card-hover {
  transition: var(--transition);
}

.card-hover:hover {
  box-shadow: var(--shadow-md);
  transform: translateY(-2px);
}

.card-fixed-width {
  min-width: 220px;
  max-width: 250px;
}

/* ========================================
   KPI Components
   ======================================== */
.kpi-title {
  font-size: var(--font-sm);
  color: var(--muted);
  margin-bottom: var(--space-3);
  font-weight: var(--weight-semibold);
  line-height: 1.3;
  text-transform: uppercase;
  letter-spacing: 0.4px;
}

.kpi-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: var(--space-10);
  margin-bottom: var(--space-12);
}

.kpi-row {
  display: grid;
  grid-template-columns: repeat(6, 1fr);
  gap: var(--space-5);
  margin-bottom: var(--space-8);
}

.kpi-card {
  background: var(--panel2);
  border: var(--border-width) solid var(--line);
  border-radius: var(--radius-md);
  padding: var(--space-6) var(--space-7);
  position: relative;
  transition: var(--transition);
  min-height: var(--space-20);
}

.kpi-card:hover {
  border-color: var(--accent);
  box-shadow: var(--shadow);
}

/* Reduced specificity - use direct classes */
.kpi-value {
  font-size: var(--font-3xl);
  font-weight: var(--weight-bold);
  margin-bottom: var(--space-1);
  line-height: 1.1;
  font-variant-numeric: tabular-nums;
}

.kpi-subline {
  font-size: var(--font-xs);
  color: var(--muted);
  margin-top: var(--space-1);
  line-height: 1.2;
}

.kpi-list {
  margin-top: var(--space-1);
  font-size: var(--font-sm);
  line-height: 1.3;
}

.kpi-list-item {
  padding: var(--space-1) 0;
  display: flex;
  justify-content: space-between;
}

.kpi-bubble {
  position: absolute;
  top: var(--space-3);
  right: var(--space-3);
  font-size: var(--font-xs);
  padding: var(--space-1) var(--space-2);
  border-radius: var(--radius-pill);
  border: var(--border-width) solid var(--line);
  background: var(--panel2);
  color: var(--muted);
  font-weight: var(--weight-semibold);
  font-variant-numeric: tabular-nums;
}

.kpi-bubble.up {
  color: var(--ok);
  border-color: var(--ok);
  background: color-mix(in srgb, var(--ok) var(--tint-medium), transparent);
}

.kpi-bubble.down {
  color: var(--bad);
  border-color: var(--bad);
  background: color-mix(in srgb, var(--bad) var(--tint-medium), transparent);
}

/* ========================================
   Tables
   ======================================== */
table {
  width: 100%;
  border-collapse: collapse;
  font-size: var(--font-normal);
}

th,
td {
  padding: var(--space-4) var(--space-6);
  text-align: left;
  border-bottom: var(--border-width) solid var(--line);
  vertical-align: top;
  line-height: 1.4;
}

th {
  background: var(--panel2);
  font-weight: var(--weight-semibold);
  font-size: var(--font-base);
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

tr:hover td { 
  background: var(--panel2); 
}

/* Table modifiers */
.table-compact th,
.table-compact td {
  padding: var(--space-3) var(--space-4);
  font-size: var(--font-base);
}

.table-compact th {
  font-size: var(--font-sm);
}

.table-mini th,
.table-mini td {
  padding: var(--space-1) var(--space-2);
  font-size: var(--font-sm);
  line-height: 1.3;
  word-break: break-word;
}

.table-wrap { 
  overflow-x: auto; 
}

.table-container {
  max-height: 320px;
  overflow-y: auto;
  overflow-x: hidden;
  margin-top: var(--space-4);
}

.table-container-sm {
  max-height: 180px;
}

/* Table with sticky header */
.table-sticky-header th {
  position: sticky;
  top: 0;
  z-index: var(--z-sticky);
}

/* ========================================
   Charts
   ======================================== */
/* Base chartbox: default height is --chart-md (170px) */
.chartbox {
  position: relative;
  background: var(--panel2);
  border: var(--border-width) solid var(--line);
  border-radius: var(--radius);
  padding: var(--space-6);
  height: var(--chart-md);
}

/* Size modifiers: explicitly override height */
.chartbox-xs { height: var(--chart-xs); }
.chartbox-sm { height: var(--chart-sm); }
.chartbox-md { height: var(--chart-md); }
.chartbox-lg { height: var(--chart-lg); }
.chartbox-xl { height: var(--chart-xl); }
.chartbox-2xl { height: var(--chart-2xl); }
.chartbox-auto { height: auto; }
.chartbox-full { height: 100%; }

/* Padding modifiers for chartbox */
.chartbox-compact { padding: var(--space-4); }
.chartbox-dense { padding: var(--space-3); }
.chartbox-relaxed { padding: var(--space-8); }

.chartbox > div {
  width: 100%;
  height: 100%;
}

/* Chartbox with flex layout */
.chartbox-flex {
  display: flex;
  flex-direction: column;
}

.chartbox-flex .kpi-title {
  margin: 0 0 var(--space-4) 0;
  padding: 0;
  flex-shrink: 0;
  color: var(--text);
}

.chartbox-flex > div[id^="ch"],
.chartbox-flex > .chart-content {
  flex: 1;
  min-height: 0;
  width: 100%;
}

/* ========================================
   Panel Cards (Two-Column Layout)
   ======================================== */
.main-content-layout {
  display: grid;
  grid-template-columns: var(--sidebar-width) 1fr;
  gap: var(--space-7);
  align-items: start;
}

/* Shared panel card styles */
.panel-card {
  height: var(--panel-height);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.left-panel-card { 
  width: var(--sidebar-width); 
}

.right-panel-card { 
  width: 100%; 
}

/* Compact headers for panels - add .panel-header to HTML */
.panel-header {
  flex-shrink: 0;
}

.panel-header h2 {
  font-size: var(--font-lg);
  margin: 0 0 var(--space-2) 0;
  line-height: 1.3;
}

.panel-header .meta {
  font-size: var(--font-sm);
  line-height: 1.3;
}

/* Panel content */
.panel-content,
.left-panel-content,
.right-panel-content {
  flex: 1;
  overflow-y: auto;
  min-height: 0;
  padding: var(--card-padding-base);
}

.left-panel-content {
  display: flex;
  flex-direction: column;
  gap: var(--space-7);
}

/* ========================================
   Vertical Items
   ======================================== */
.vertical-item,
.trends-vertical-item,
.domains-vertical-item,
.histogram-vertical-item {
  display: flex;
  flex-direction: column;
  gap: var(--space-6);
  flex-shrink: 0;
}

/* ========================================
   Grids
   ======================================== */
.trends-grid,
.users-charts-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: var(--space-10);
  margin-bottom: var(--space-10);
}

.domains-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: var(--space-8);
  margin-bottom: var(--space-10);
}

.online-now {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: var(--space-6);
  margin-bottom: var(--space-6);
}

/* ========================================
   Users Grid
   ======================================== */
.users-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(220px, 250px));
  gap: var(--space-6);
  overflow-y: auto;
  overflow-x: hidden;
  padding-right: var(--space-3);
  justify-content: start;
}

/* Note: Apply .card-fixed-width and .card-hover to user cards in HTML */

/* User card header - add .user-card-header to HTML element */
.user-card-header {
  min-height: var(--space-20);
  display: flex;
  flex-direction: column;
  gap: var(--space-5);
}

.user-title-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-4);
}

/* User card title - reduced specificity */
.user-card-title {
  font-size: var(--font-xl);
  font-weight: var(--weight-semibold);
  margin: 0;
  line-height: 1.3;
  color: var(--text);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  flex: 1;
}

/* User metrics */
.metrics-row {
  display: flex;
  width: 100%;
  align-items: stretch;
  margin-top: auto;
}

.metric-item {
  flex: 1 1 0;
  min-width: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: var(--space-5) 0;
}

.metric-item + .metric-item {
  border-left: var(--border-width) solid var(--line);
}

.metric-value {
  font-size: var(--font-metric);
  font-weight: var(--weight-bold);
  line-height: 1.2;
  color: var(--text);
  font-variant-numeric: tabular-nums;
}

.metric-label {
  font-size: var(--font-sm);
  font-weight: var(--weight-medium);
  color: var(--muted);
  text-transform: lowercase;
  letter-spacing: 0.3px;
  line-height: 1;
  margin-top: var(--space-1);
}

/* User card body - add .user-card-body to HTML element */
.user-card-body {
  padding: var(--card-padding-sm);
  padding-bottom: var(--space-8);
}

/* Domains list (vertical stack for user cards) */
.domains-list {
  display: flex;
  flex-direction: column;
  gap: 0;
}

/* Domain items */
.domains-section {
  margin-top: var(--space-5);
}

.domains-section-title {
  font-size: var(--font-xs);
  font-weight: var(--weight-bold);
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: 0.8px;
  margin-bottom: var(--space-4);
  line-height: 1;
  text-align: center;
}

.domain-item {
  display: flex;
  align-items: baseline;
  gap: var(--space-2);
  padding: var(--space-1) 0;
  line-height: 1.4;
}

.domain-pct {
  font-size: var(--font-normal);
  font-weight: var(--weight-bold);
  color: var(--accent);
  min-width: var(--space-16);
  font-variant-numeric: tabular-nums;
  flex-shrink: 0;
}

.domain-bullet {
  color: var(--muted);
  font-size: var(--font-sm);
  flex-shrink: 0;
}

.domain-gb {
  font-size: var(--font-base);
  color: var(--muted);
  font-variant-numeric: tabular-nums;
  min-width: var(--space-20);
  flex-shrink: 0;
}

.domain-name {
  font-size: var(--font-base);
  color: var(--text);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  flex: 1;
  min-width: 0;
}

/* ========================================
   Filters
   ======================================== */
.filters {
  padding: var(--space-3) var(--space-4);
  border-bottom: var(--border-width) solid var(--line);
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-3);
}

.filters-inline {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-3);
  align-items: center;
  margin-left: auto;
  flex: 1;
  min-width: 0;
}

.users-controls-row {
  display: flex;
  align-items: center;
  gap: var(--space-6);
  flex-wrap: wrap;
  width: 100%;
}

.filter-chip {
  padding: var(--space-3) var(--space-6);
  background: var(--panel2);
  border: var(--border-width) solid var(--line);
  border-radius: var(--radius-xl);
  cursor: pointer;
  font-size: var(--font-md);
  color: var(--muted);
  transition: var(--transition-fast);
}

.filter-chip:hover {
  border-color: var(--accent);
  color: var(--text);
}

.filter-chip.active {
  background: var(--accent);
  border-color: var(--accent);
  color: var(--text-inverse);
}

/* ========================================
   Forms
   ======================================== */
input,
select,
textarea {
  padding: var(--space-5) var(--space-6);
  background: var(--panel2);
  border: var(--border-width) solid var(--line);
  border-radius: var(--radius);
  color: var(--text);
  font-size: var(--font-lg);
  outline: none;
  transition: var(--transition-fast);
}

input:focus,
select:focus,
textarea:focus {
  border-color: var(--accent);
}

textarea {
  width: 100%;
  min-height: 150px;
  font-family: monospace;
  font-size: var(--font-md);
}

.form-row {
  display: flex;
  gap: var(--space-6);
  align-items: center;
  flex-wrap: wrap;
  margin-bottom: var(--space-6);
}

label {
  font-size: var(--font-normal);
  color: var(--muted);
}

/* ========================================
   Modal & Toast
   ======================================== */
.modal-overlay {
  position: fixed;
  inset: 0;
  background: var(--overlay-bg);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: var(--z-modal);
}

.modal-overlay.show { display: flex; }

.modal {
  background: var(--panel);
  border: var(--border-width) solid var(--line);
  border-radius: var(--radius-lg);
  padding: var(--space-12);
  max-width: var(--modal-max);
  width: 90%;
  box-shadow: var(--shadow-lg);
}

.modal h3 { 
  margin: 0 0 var(--space-8); 
  font-size: var(--font-xl);
  font-weight: var(--weight-semibold);
  color: var(--text);
}

.modal-actions {
  display: flex;
  justify-content: flex-end;
  gap: var(--space-6);
  margin-top: var(--space-10);
}

.toast {
  position: fixed;
  bottom: var(--space-10);
  right: var(--space-10);
  background: var(--panel);
  border: var(--border-width) solid var(--line);
  border-radius: var(--radius-lg);
  padding: var(--space-8) var(--space-10);
  box-shadow: var(--shadow-lg);
  display: none;
  z-index: var(--z-toast);
  max-width: var(--toast-max);
}

.toast.show { display: block; }
.toast-title { 
  font-weight: var(--weight-semibold); 
  margin-bottom: var(--space-2); 
  color: var(--text);
}
.toast-text { 
  font-size: var(--font-normal); 
  color: var(--muted); 
}

/* ========================================
   State & UI
   ======================================== */
.pane,
.system-subpane { 
  display: none; 
}

.pane.active,
.system-subpane.active { 
  display: block; 
}

.progress-bar {
  width: 100%;
  height: var(--space-10);
  background: var(--panel2);
  border: var(--border-width) solid var(--line);
  border-radius: var(--radius-md);
  overflow: hidden;
  position: relative;
}

.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--accent), var(--ok));
  transition: var(--transition-slow);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: var(--font-sm);
  color: var(--text-inverse);
  font-weight: var(--weight-semibold);
}

.help {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: var(--icon-md);
  height: var(--icon-md);
  background: var(--panel2);
  border: var(--border-width) solid var(--line);
  border-radius: var(--radius-full);
  font-size: var(--font-base);
  color: var(--muted);
  cursor: help;
  position: relative;
}

.help:hover::after {
  content: attr(data-tip);
  position: absolute;
  left: 0;
  top: 100%;
  margin-top: var(--space-3);
  background: var(--panel2);
  color: var(--text);
  padding: var(--space-4) var(--space-6);
  border: var(--border-width) solid var(--line);
  border-radius: var(--radius);
  font-size: var(--font-base);
  white-space: normal;
  max-width: var(--tooltip-max);
  width: max-content;
  min-width: 150px;
  z-index: var(--z-tooltip);
  box-shadow: var(--shadow-lg);
  line-height: 1.4;
  word-wrap: break-word;
}

.notice {
  padding: var(--space-6) var(--space-10);
  background: var(--panel2);
  border-top: var(--border-width) solid var(--line);
  font-size: var(--font-md);
  color: var(--muted);
}

.row {
  display: flex;
  align-items: center;
  gap: var(--space-4);
  flex-wrap: wrap;
}

/* ========================================
   Utilities
   ======================================== */
.mono { font-family: ui-monospace, Menlo, Consolas, monospace; }
.muted { color: var(--muted); }
.text-ok { color: var(--ok); }
.text-bad { color: var(--bad); }
.text-warn { color: var(--warn); }
.mb-0 { margin-bottom: 0; }
.mt-8 { margin-top: var(--space-8); }
.mt-16 { margin-top: var(--space-16); }
.mt-32 { margin-top: var(--space-16); }
.flex { display: flex; }
.gap-4 { gap: var(--space-4); }
.gap-8 { gap: var(--space-8); }
.gap-16 { gap: var(--space-16); }
.items-center { align-items: center; }

/* Grid utilities */
.grid { display: grid; }
.grid-2 { grid-template-columns: repeat(2, 1fr); }
.grid-3 { grid-template-columns: repeat(3, 1fr); }
.grid-6 { grid-template-columns: repeat(6, 1fr); }
.grid-auto { grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); }

/* Spacing utilities - expanded */
.p-0 { padding: 0; }
.m-0 { margin: 0; }
.mb-8 { margin-bottom: var(--space-8); }
.mb-10 { margin-bottom: var(--space-10); }
.mt-4 { margin-top: var(--space-4); }
.mt-6 { margin-top: var(--space-6); }
.mt-10 { margin-top: var(--space-10); }
.mt-12 { margin-top: var(--space-12); }

/* Flex utilities - expanded */
.flex-col { flex-direction: column; }
.flex-wrap { flex-wrap: wrap; }
.justify-between { justify-content: space-between; }
.justify-center { justify-content: center; }
.justify-end { justify-content: flex-end; }
.items-start { align-items: flex-start; }
.items-end { align-items: flex-end; }
.flex-1 { flex: 1; }
.flex-shrink-0 { flex-shrink: 0; }

/* Text utilities */
.text-center { text-align: center; }
.text-right { text-align: right; }
.text-xs { font-size: var(--font-xs); }
.text-sm { font-size: var(--font-sm); }
.text-base { font-size: var(--font-base); }
.text-lg { font-size: var(--font-lg); }
.text-xl { font-size: var(--font-xl); }
.font-bold { font-weight: var(--weight-bold); }
.font-semibold { font-weight: var(--weight-semibold); }
.uppercase { text-transform: uppercase; }
.lowercase { text-transform: lowercase; }

/* Display utilities */
.block { display: block; }
.inline-block { display: inline-block; }
.hidden { display: none; }

/* Position utilities */
.relative { position: relative; }
.absolute { position: absolute; }

/* Overflow utilities */
.overflow-hidden { overflow: hidden; }
.overflow-auto { overflow: auto; }

/* ========================================
   Media Queries
   ======================================== */
@media (max-width: 1800px) {
  .main-content-layout {
    grid-template-columns: 1fr;
    gap: var(--space-8);
  }
}

@media (max-width: 1600px) {
  .kpi-row { grid-template-columns: repeat(3, 1fr); }
}

@media (max-width: 1000px) {
  .kpi-row { grid-template-columns: repeat(2, 1fr); }
  .trends-grid,
  .domains-grid,
  .users-charts-grid { 
    grid-template-columns: 1fr; 
  }
}

@media (max-width: 900px) {
  .users-grid { 
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  }
}

@media (max-width: 800px) {
  .online-now { grid-template-columns: 1fr; }
}

@media (max-width: 600px) {
  .kpi-row { grid-template-columns: 1fr; }
}

@media (max-width: 500px) {
  .users-grid { grid-template-columns: 1fr; }
}
