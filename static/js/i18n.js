// ==================== I18N ====================
const i18n = {
  ru: {
    dashboard: 'Обзор',
    users: 'Пользователи',
    events: 'События',
    xray: 'Xray',
    settings: 'Настройки',
    topUsers: 'Топ пользователей по трафику',
    user: 'Пользователь',
    traffic: 'Трафик',
    daysActive: 'Дней активен',
    usersManagement: 'Управление пользователями',
    usersDesc: 'Здесь показаны все пользователи из конфига Xray. Вы можете добавить нового, удалить существующего или "кикнуть" — сменить UUID.',
    addUser: 'Добавить',
    refresh: 'Обновить',
    name: 'Имя',
    actions: 'Действия',
    eventLog: 'Журнал событий',
    eventsDesc: 'Журнал всех действий в панели.',
    time: 'Время',
    type: 'Тип',
    action: 'Действие',
    details: 'Детали',
    xrayConfig: 'Конфигурация Xray',
    xrayDesc: 'Просмотр конфигурации Xray и параметров Reality.',
    reload: 'Загрузить',
    restartXray: 'Перезапустить Xray',
    settingsTitle: 'Настройки панели',
    settingsDesc: 'Настройте адрес сервера и другие параметры.',
    save: 'Сохранить',
    todayTraffic: 'Трафик сегодня',
    yesterdayTraffic: 'Трафик вчера',
    totalTraffic: 'Всего за период',
    activeUsers: 'Активных юзеров',
    collectorLag: 'Лаг сборщика',
    getLink: 'Ссылка',
    kick: 'Кикнуть',
    delete: 'Удалить',
    confirmDelete: 'Вы уверены что хотите удалить пользователя',
    confirmKick: 'Сменить UUID пользователя? Все текущие подключения оборвутся.',
    userAdded: 'Пользователь добавлен',
    userDeleted: 'Пользователь удалён',
    userKicked: 'UUID сменён, пользователь кикнут',
    linkCopied: 'Ссылка скопирована',
    settingsSaved: 'Настройки сохранены',
    error: 'Ошибка',
  },
  en: {
    dashboard: 'Dashboard',
    users: 'Users',
    events: 'Events',
    xray: 'Xray',
    settings: 'Settings',
    topUsers: 'Top users by traffic',
    user: 'User',
    traffic: 'Traffic',
    daysActive: 'Days active',
    usersManagement: 'Users management',
    usersDesc: 'All users from Xray config. You can add, delete or kick (change UUID to disconnect current sessions).',
    addUser: 'Add',
    refresh: 'Refresh',
    name: 'Name',
    actions: 'Actions',
    eventLog: 'Event log',
    eventsDesc: 'Log of all actions in the panel.',
    time: 'Time',
    type: 'Type',
    action: 'Action',
    details: 'Details',
    xrayConfig: 'Xray Configuration',
    xrayDesc: 'View Xray config and Reality params.',
    reload: 'Reload',
    restartXray: 'Restart Xray',
    settingsTitle: 'Panel Settings',
    settingsDesc: 'Configure server address and other params.',
    save: 'Save',
    todayTraffic: 'Today traffic',
    yesterdayTraffic: 'Yesterday traffic',
    totalTraffic: 'Total for period',
    activeUsers: 'Active users',
    collectorLag: 'Collector lag',
    getLink: 'Link',
    kick: 'Kick',
    delete: 'Delete',
    confirmDelete: 'Are you sure you want to delete user',
    confirmKick: 'Change user UUID? All current connections will be dropped.',
    userAdded: 'User added',
    userDeleted: 'User deleted',
    userKicked: 'UUID changed, user kicked',
    linkCopied: 'Link copied',
    settingsSaved: 'Settings saved',
    error: 'Error',
  }
};

function t(key) {
  return i18n[state.lang]?.[key] || i18n.en[key] || key;
}

function applyI18n() {
  document.querySelectorAll('[data-i18n]').forEach(el => {
    const key = el.getAttribute('data-i18n');
    el.textContent = t(key);
  });
}
